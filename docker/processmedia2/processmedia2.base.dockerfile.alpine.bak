from python:3-alpine

COPY --from=docker /usr/local/bin/docker /usr/local/bin/

RUN apk --update --no-cache add \
    git \
    zlib \
&& rm -rf /var/lib/apt/lists/* && rm -rf /var/cache/apk/*

COPY processmedia2.pip requirements.pip
RUN pip3 install -r requirements.pip

WORKDIR /processmedia2
CMD ["make", "run"]

# docker build -t processmedia2:latest --file .\processmedia2.base.dockerfile .
# docker run -it --rm -v ../:/processmedia2:ro -v /var/run/docker.sock:/var/run/docker.sock docker.io processmedia2:latest
